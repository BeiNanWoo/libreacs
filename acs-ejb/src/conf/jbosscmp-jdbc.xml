<!DOCTYPE jbosscmp-jdbc PUBLIC "-//JBoss//DTD JBOSSCMP-JDBC 4.0//EN" "http://www.jboss.org/j2ee/dtd/jbosscmp-jdbc_4_0.dtd">
<jbosscmp-jdbc>
    <defaults>
        <datasource>java:/ACS</datasource>
        <datasource-mapping>mySQL</datasource-mapping>
        <create-table>true</create-table>
        <alter-table>true</alter-table>
    </defaults>
    <enterprise-beans>
        <entity>
            <ejb-name>HardwareModelBean</ejb-name>
            <post-table-create>
                <sql-statement>create unique index kmodels on HardwareModelBean (oui,hclass,version);</sql-statement>
            </post-table-create>
            <unknown-pk>
                <unknown-pk-class>java.lang.Integer</unknown-pk-class>
                <field-name>id</field-name>
                <column-name>id</column-name>
                <jdbc-type>INTEGER</jdbc-type>
                <sql-type>INT(11)</sql-type>
                <auto-increment/>
            </unknown-pk>
            <entity-command name="get-generated-keys"/>
        </entity>
        <entity>
            <ejb-name>HostsBean</ejb-name>
            <post-table-create>
                <sql-statement>create unique index khosts on HostsBean (hwid,serialno);</sql-statement>
            </post-table-create>
            <unknown-pk>
                <unknown-pk-class>java.lang.Integer</unknown-pk-class>
                <field-name>id</field-name>
                <column-name>id</column-name>
                <jdbc-type>INTEGER</jdbc-type>
                <sql-type>INT(11)</sql-type>
                <auto-increment/>
            </unknown-pk>
            <entity-command name="get-generated-keys"/>
        </entity>
        <entity>
            <ejb-name>ServiceBean</ejb-name>
            <unknown-pk>
                <unknown-pk-class>java.lang.Integer</unknown-pk-class>
                <field-name>id</field-name>
                <column-name>id</column-name>
                <jdbc-type>INTEGER</jdbc-type>
                <sql-type>INT(11)</sql-type>
                <auto-increment/>
            </unknown-pk>
            <entity-command name="get-generated-keys"/>
        </entity>
    </enterprise-beans>
    <relationships>
        <ejb-relation>
            <ejb-relation-name>Host-Model</ejb-relation-name>
            <foreign-key-mapping/>
            <ejb-relationship-role>
                <ejb-relationship-role-name>host-is-of-model</ejb-relationship-role-name>
            </ejb-relationship-role>
            <ejb-relationship-role>
                <ejb-relationship-role-name>model-has-devices</ejb-relationship-role-name>
                <key-fields>
                    <key-field>
                        <field-name>id</field-name>
                        <column-name>hwid</column-name>
                    </key-field>
                </key-fields>
            </ejb-relationship-role>
        </ejb-relation>
        <ejb-relation>
            <ejb-relation-name>Host-Profile</ejb-relation-name>
            <foreign-key-mapping/>
            <ejb-relationship-role>
                <ejb-relationship-role-name>host-has-profile</ejb-relationship-role-name>
            </ejb-relationship-role>
            <ejb-relationship-role>
                <ejb-relationship-role-name>profile-is-assigned-to-devices</ejb-relationship-role-name>
                <key-fields>
                    <key-field>
                        <field-name>name</field-name>
                        <column-name>profileName</column-name>
                    </key-field>
                </key-fields>
            </ejb-relationship-role>
        </ejb-relation>
        <ejb-relation>
            <ejb-relation-name>Model-Firmware</ejb-relation-name>
            <foreign-key-mapping/>
            <ejb-relationship-role>
                <ejb-relationship-role-name>firmware-is-for-model</ejb-relationship-role-name>
            </ejb-relationship-role>
            <ejb-relationship-role>
                <ejb-relationship-role-name>model-has-firmware</ejb-relationship-role-name>
                <key-fields>
                    <key-field>
                        <field-name>id</field-name>
                        <column-name>hwid</column-name>
                    </key-field>
                </key-fields>
            </ejb-relationship-role>
        </ejb-relation>

        <ejb-relation>
            <ejb-relation-name>Host2ServiceInstance</ejb-relation-name>
            <foreign-key-mapping/>
            <ejb-relationship-role>
                <ejb-relationship-role-name>Host-has-services</ejb-relationship-role-name>
            </ejb-relationship-role>
            <ejb-relationship-role>
                <ejb-relationship-role-name>service-instance-provided-by-host</ejb-relationship-role-name>
                <key-fields>
                    <key-field>
                        <field-name>id</field-name>
                        <column-name>hostid</column-name>
                    </key-field>
                </key-fields>
            </ejb-relationship-role>
        </ejb-relation>

        <ejb-relation>
            <ejb-relation-name>Service2ServiceInstance</ejb-relation-name>
            <foreign-key-mapping/>
            <ejb-relationship-role>
                <ejb-relationship-role-name>Service-has-instances</ejb-relationship-role-name>
            </ejb-relationship-role>
            <ejb-relationship-role>
                <ejb-relationship-role-name>instance-is-of-service</ejb-relationship-role-name>
                <key-fields>
                    <key-field>
                        <field-name>id</field-name>
                        <column-name>serviceid</column-name>
                    </key-field>
                </key-fields>
            </ejb-relationship-role>
        </ejb-relation>


        <ejb-relation>
            <ejb-relation-name>Properties-Host</ejb-relation-name>
            <foreign-key-mapping/>
            <ejb-relationship-role>
                <ejb-relationship-role-name>property-is-for-host</ejb-relationship-role-name>
            </ejb-relationship-role>
            <ejb-relationship-role>
                <ejb-relationship-role-name>host-has-properties</ejb-relationship-role-name>
                <key-fields>
                    <key-field>
                        <field-name>id</field-name>
                        <column-name>parentId</column-name>
                    </key-field>
                </key-fields>
            </ejb-relationship-role>
        </ejb-relation>
        <ejb-relation>
            <ejb-relation-name>Properties-Profile</ejb-relation-name>
            <foreign-key-mapping/>
            <ejb-relationship-role>
                <ejb-relationship-role-name>property-is-for-profile</ejb-relationship-role-name>
            </ejb-relationship-role>
            <ejb-relationship-role>
                <ejb-relationship-role-name>profile-has-properties</ejb-relationship-role-name>
                <key-fields>
                    <key-field>
                        <field-name>name</field-name>
                        <column-name>profilename</column-name>
                    </key-field>
                </key-fields>
            </ejb-relationship-role>
        </ejb-relation>
        <ejb-relation>
            <ejb-relation-name>Properties-Service</ejb-relation-name>
            <foreign-key-mapping/>
            <ejb-relationship-role>
                <ejb-relationship-role-name>property-is-for-service</ejb-relationship-role-name>
            </ejb-relationship-role>
            <ejb-relationship-role>
                <ejb-relationship-role-name>service-has-properties</ejb-relationship-role-name>
                <key-fields>
                    <key-field>
                        <field-name>id</field-name>
                        <column-name>serviceid</column-name>
                    </key-field>
                </key-fields>
            </ejb-relationship-role>
        </ejb-relation>
        <ejb-relation>
            <ejb-relation-name>Model-Config</ejb-relation-name>
            <foreign-key-mapping/>
            <ejb-relationship-role>
                <ejb-relationship-role-name>config-is-for-model</ejb-relationship-role-name>
            </ejb-relationship-role>
            <ejb-relationship-role>
                <ejb-relationship-role-name>model-has-configs</ejb-relationship-role-name>
                <key-fields>
                    <key-field>
                        <field-name>id</field-name>
                        <column-name>hwid</column-name>
                    </key-field>
                </key-fields>
            </ejb-relationship-role>
        </ejb-relation>

    </relationships>
</jbosscmp-jdbc>